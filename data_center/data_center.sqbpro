<?xml version="1.0" encoding="UTF-8"?><sqlb_project><db path="data_center.db" readonly="0" foreign_keys="1" case_sensitive_like="0" temp_store="0" wal_autocheckpoint="1000" synchronous="2"/><attached/><window><main_tabs open="structure browser query pragmas" current="1"/></window><tab_structure><column_width id="0" width="300"/><column_width id="1" width="0"/><column_width id="2" width="100"/><column_width id="3" width="5590"/><column_width id="4" width="0"/><expanded_item id="0" parent="1"/><expanded_item id="1" parent="1"/><expanded_item id="2" parent="1"/><expanded_item id="3" parent="1"/></tab_structure><tab_browse><table title="stock_price_involve_report" custom_title="0" dock_id="1" table="4,26:mainstock_price_involve_report"/><dock_state state="000000ff00000000fd000000010000000200000476000002abfc0100000001fb000000160064006f0063006b00420072006f00770073006500310100000000000004760000012e00ffffff000004760000000000000004000000040000000800000008fc00000000"/><default_encoding codec=""/><browse_table_settings><table schema="main" name="addition_info" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="20"/><column index="2" value="23"/><column index="3" value="64"/><column index="4" value="51"/><column index="5" value="54"/><column index="6" value="43"/><column index="7" value="49"/><column index="8" value="38"/><column index="9" value="57"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="fm_stock_span" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="218"/><column index="2" value="55"/><column index="3" value="102"/><column index="4" value="98"/><column index="5" value="141"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="fm_taiwan_stock_daily" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort><column index="1" mode="1"/></sort><column_widths><column index="1" value="61"/><column index="2" value="87"/><column index="3" value="55"/><column index="4" value="102"/><column index="5" value="103"/><column index="6" value="108"/><column index="7" value="63"/><column index="8" value="63"/><column index="9" value="63"/><column index="10" value="63"/><column index="11" value="107"/><column index="12" value="87"/><column index="13" value="87"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="stock_daily" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="34"/><column index="2" value="60"/><column index="3" value="47"/><column index="4" value="47"/><column index="5" value="67"/><column index="6" value="47"/><column index="7" value="47"/><column index="8" value="47"/><column index="9" value="47"/><column index="10" value="47"/><column index="11" value="47"/><column index="12" value="60"/><column index="13" value="106"/><column index="14" value="73"/><column index="15" value="60"/><column index="16" value="106"/><column index="17" value="73"/><column index="18" value="73"/><column index="19" value="119"/><column index="20" value="86"/><column index="21" value="34"/><column index="22" value="34"/><column index="23" value="34"/><column index="24" value="56"/><column index="25" value="60"/><column index="26" value="60"/><column index="27" value="60"/><column index="28" value="73"/><column index="29" value="86"/><column index="30" value="86"/><column index="31" value="99"/><column index="32" value="73"/><column index="33" value="86"/><column index="34" value="73"/><column index="35" value="86"/><column index="36" value="86"/><column index="37" value="99"/><column index="38" value="60"/><column index="39" value="60"/><column index="40" value="60"/><column index="41" value="60"/><column index="42" value="60"/><column index="43" value="86"/><column index="44" value="60"/><column index="45" value="60"/><column index="46" value="60"/><column index="47" value="73"/><column index="48" value="73"/><column index="49" value="73"/><column index="50" value="67"/><column index="51" value="67"/><column index="52" value="80"/><column index="53" value="67"/><column index="54" value="60"/><column index="55" value="86"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="stock_price_involve_report" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="31"/><column index="2" value="143"/><column index="3" value="55"/><column index="4" value="71"/><column index="5" value="175"/><column index="6" value="82"/><column index="7" value="123"/><column index="8" value="87"/><column index="9" value="67"/><column index="10" value="95"/><column index="11" value="135"/><column index="12" value="159"/><column index="13" value="87"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="tpex_insti_summary" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="20"/><column index="2" value="57"/><column index="3" value="28"/><column index="4" value="42"/><column index="5" value="57"/><column index="6" value="76"/><column index="7" value="76"/><column index="8" value="63"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="twse_announcement_notice" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="46"/><column index="2" value="57"/><column index="3" value="124"/><column index="4" value="57"/><column index="5" value="300"/><column index="6" value="78"/><column index="7" value="54"/><column index="8" value="54"/><column index="9" value="156"/><column index="10" value="85"/><column index="11" value="247"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table><table schema="main" name="twse_marginTrading_miMargn" show_row_id="0" encoding="" plot_x_axis="" unlock_view_pk="_rowid_" freeze_columns="0"><sort/><column_widths><column index="1" value="31"/><column index="2" value="70"/><column index="3" value="101"/><column index="4" value="70"/><column index="5" value="70"/><column index="6" value="81"/><column index="7" value="78"/><column index="8" value="78"/><column index="9" value="156"/></column_widths><filter_values/><conditional_formats/><row_id_formats/><display_formats/><hidden_columns/><plot_y_axes/><global_filter/></table></browse_table_settings></tab_browse><tab_sql><sql name="SQL 13*">CREATE TABLE IF NOT EXISTS stock_price_involve_report (
  id         INTEGER PRIMARY KEY AUTOINCREMENT,

  report     TEXT    NOT NULL,  -- {stock_id}-{period_days}-{yyyymmdd}
  stock_id   TEXT    NOT NULL,

  price      REAL    NOT NULL,

  lastDt_close_distance REAL,   -- (price - last_dt_close) / last_dt_close

  involve_days  INTEGER NOT NULL,
  involve_date  TEXT    NOT NULL,   -- yyyymmdd|yyyymmdd|...

  date       TEXT    NOT NULL,      -- 'YYYY-MM-DD'
  price_type TEXT    NOT NULL,      -- close/open/min/max

  volume     INTEGER NOT NULL,
  vol_weight REAL    NOT NULL,
  vol_wei_pr REAL    NOT NULL,

  created_at INTEGER NOT NULL DEFAULT (strftime('%s','now')),

  -- 防止同一份報告重複寫入
  UNIQUE (report, stock_id, date, price_type, price)
);

CREATE INDEX IF NOT EXISTS idx_spir_report
ON stock_price_involve_report (report);

CREATE INDEX IF NOT EXISTS idx_spir_stock_report
ON stock_price_involve_report (stock_id, report);

CREATE INDEX IF NOT EXISTS idx_spir_stock_date
ON stock_price_involve_report (stock_id, date);
</sql><current_tab id="0"/></tab_sql></sqlb_project>
